services:
  # ðŸŒ± Spring Boot Backend
  - type: web
    name: food-waste-backend
    env: java               # ðŸ‘ˆ Tells Render to use Java runtime
    rootDir: backend        # ðŸ‘ˆ Correct key name (not "path")
    branch: main
    buildCommand: mvn -DskipTests package
    startCommand: java -jar target/food-waste-management-1.0.0.jar
    envVars:
      - key: SPRING_DATASOURCE_URL
        value: ${DATABASE_URL}
      - key: SPRING_DATASOURCE_USERNAME
        value: ${DB_USER}
      - key: SPRING_DATASOURCE_PASSWORD
        value: ${DB_PASS}
      - key: SERVER_PORT
        value: 8080

  # ðŸ’» React Frontend
  - type: static
    name: food-waste-frontend
    env: node
    rootDir: frontend
    branch: main
    buildCommand: |
      npm install
      npm run build
    staticPublishPath: dist
    envVars:
      - key: VITE_API_BASE_URL
        value: https://food-waste-backend.onrender.com
